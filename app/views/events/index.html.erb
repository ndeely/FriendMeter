<p id="notice"><%= notice %></p>

<h1>Events</h1>

<button class="btn1" onclick="window.location.href='<%= new_event_path %>'">
  <span class="circle" aria-hidden="true">
  <span class="icon arrow"></span>
  </span>
  <span class="button-text">Create Event</span>
</button>

<table class="events">
  <thead>
    <tr>
      <th>Event ID</th>
      <th>Name</th>
      <th>Description</th>
      <th>Date</th>
      <th>Time</th>
      <th>Pic</th>
      <th>Creator</th>
      <th>View Event</th>
    </tr>
  </thead>

  <tbody>
    <%= will_paginate @events %>
      <% @events.each do |event| %>
        <tr>
          <td><%= event.id %></td>
          <td><%= event.name %></td>
          <td><%= event.description %></td>
          <td><%= event.date %></td>
          <td><%= event.time.strftime("%I:%M %p") %></td>
          <td><%= image_tag(event.pic) %></td>
          <%
          @creator = User.all.find(event.user_id)
          @b2 = @b1 || current_user.id == @creator.id
          # get the creator's name
          @name = @b2 ? @creator.fname.to_s + " " + @creator.lname.to_s : @creator.username
          @name = (@name.eql?" ") ? @creator.username.to_s : @name
          %>
          <td>
            <button class="btn1" onclick="window.location.href='/users/<%= event.user_id.to_s %>'">
              <span class="circle" aria-hidden="true">
              <span class="icon arrow"></span>
              </span>
              <span class="button-text"><%= @name %></span>
            </button>
          </td>
          <td>
            <button class="btn1" onclick="window.location.href='/events/<%= event.id %>'">
              <span class="circle" aria-hidden="true">
              <span class="icon arrow"></span>
              </span>
              <span class="button-text">View</span>
            </button>
          </td>
          <% if @b2 %>
            <td><%= link_to 'Delete', event, method: :delete, data: { confirm: 'Are you sure?' } %></td>
          <% end %>
        </tr>
      <% end %>
    <%= will_paginate @events %>
  </tbody>
</table>
